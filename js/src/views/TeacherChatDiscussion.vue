<template>
    <div class="Discussion-divider" >
        <div class="ChatContainer" v-if="discussionPermission==='allowed'">
            <div class="header-selection">
                <h3>Discussions</h3>
                <div class="selector-options">
                    <ul>
                        <li :class="{ 'active': activeItem === 'Community' }" @click="show('Community')">Community</li>
                        <li :class="{ 'active': activeItem === 'By event' }" @click="show('By event')">By event</li>
                        <li :class="{ 'active': activeItem === 'By Topic' }" @click="show('By Topic')">By Topic</li>
                    </ul>
                </div>
            </div>

            <div class="ChatContainer-ChatGroup">
            <div class="ChatContainer-WelcomeTab">
                <img :src="thumbnail" alt="" class="upload-image">
                <div class="WelcomeTab-AdminModule">

                    <div class="AdminModule-Person">
                        <h2 class="WelcomeTab-h2">Welcome Jake!</h2>
                        <span>14 MARCH, 2023</span>
                    </div>
                    <p>Youâ€™re in The Business Expansion Event!</p>
                    <div class="ChatContainer-Divider"></div>         
                </div>
                <div v-if="descriptionDetails" class="ChatContainer-Divider"></div>
                <ChatReceiver :message="descriptionDetails" :isReplyIcon="false" @uploadImage="uploadImage" />
            </div>
            </div>

            <div class="ChatContainer-Divider"></div>
            <PostMessage @onEnter="sendDiscussion" />

            <!-- chat container where all the text messages displayed =========== -->
            <div class="ChatContainer-ChatGroup" v-for="(message, index) in chatMessages" :key="index">
                <ChatReceiver :message="message" @replyId="replyId" @sendReply="sendDiscussion" @uploadImage="uploadImage" />
                <ChatSender v-for="(reply, index) in message.replies" :key="index" :reply="reply"
                    :parentNode="message.id" @replyId="replyId" @sendReply="sendDiscussion" @uploadImage="uploadImage" />
                <div class="ChatContainer-Divider"></div>
            </div>
            <!-- chat container where all the text messages displayed =========== -->



        </div>

        <div class="ModuleContainer">
            <!-- <div class="related-questions">
                <div class="toggle">
                    <div class="toggle-module">
                        <svg width="20" height="18" viewBox="0 0 20 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M15 8H14C13.7348 8 13.4804 8.10536 13.2929 8.29289C13.1054 8.48043 13 8.73478 13 9C13 9.26522 13.1054 9.51957 13.2929 9.70711C13.4804 9.89464 13.7348 10 14 10H15C15.2652 10 15.5196 9.89464 15.7071 9.70711C15.8946 9.51957 16 9.26522 16 9C16 8.73478 15.8946 8.48043 15.7071 8.29289C15.5196 8.10536 15.2652 8 15 8ZM15 12H14C13.7348 12 13.4804 12.1054 13.2929 12.2929C13.1054 12.4804 13 12.7348 13 13C13 13.2652 13.1054 13.5196 13.2929 13.7071C13.4804 13.8946 13.7348 14 14 14H15C15.2652 14 15.5196 13.8946 15.7071 13.7071C15.8946 13.5196 16 13.2652 16 13C16 12.7348 15.8946 12.4804 15.7071 12.2929C15.5196 12.1054 15.2652 12 15 12ZM9 6H15C15.2652 6 15.5196 5.89464 15.7071 5.70711C15.8946 5.51957 16 5.26522 16 5C16 4.73478 15.8946 4.48043 15.7071 4.29289C15.5196 4.10536 15.2652 4 15 4H9C8.73478 4 8.48043 4.10536 8.29289 4.29289C8.10536 4.48043 8 4.73478 8 5C8 5.26522 8.10536 5.51957 8.29289 5.70711C8.48043 5.89464 8.73478 6 9 6V6ZM19 0H5C4.73478 0 4.48043 0.105357 4.29289 0.292893C4.10536 0.48043 4 0.734784 4 1V4H1C0.734784 4 0.48043 4.10536 0.292893 4.29289C0.105357 4.48043 0 4.73478 0 5V15C0 15.7956 0.316071 16.5587 0.87868 17.1213C1.44129 17.6839 2.20435 18 3 18H16C17.0609 18 18.0783 17.5786 18.8284 16.8284C19.5786 16.0783 20 15.0609 20 14V1C20 0.734784 19.8946 0.48043 19.7071 0.292893C19.5196 0.105357 19.2652 0 19 0V0ZM4 15C4 15.2652 3.89464 15.5196 3.70711 15.7071C3.51957 15.8946 3.26522 16 3 16C2.73478 16 2.48043 15.8946 2.29289 15.7071C2.10536 15.5196 2 15.2652 2 15V6H4V15ZM18 14C18 14.5304 17.7893 15.0391 17.4142 15.4142C17.0391 15.7893 16.5304 16 16 16H5.82C5.93642 15.6793 5.9973 15.3411 6 15V2H18V14ZM9 10H10C10.2652 10 10.5196 9.89464 10.7071 9.70711C10.8946 9.51957 11 9.26522 11 9C11 8.73478 10.8946 8.48043 10.7071 8.29289C10.5196 8.10536 10.2652 8 10 8H9C8.73478 8 8.48043 8.10536 8.29289 8.29289C8.10536 8.48043 8 8.73478 8 9C8 9.26522 8.10536 9.51957 8.29289 9.70711C8.48043 9.89464 8.73478 10 9 10V10ZM9 14H10C10.2652 14 10.5196 13.8946 10.7071 13.7071C10.8946 13.5196 11 13.2652 11 13C11 12.7348 10.8946 12.4804 10.7071 12.2929C10.5196 12.1054 10.2652 12 10 12H9C8.73478 12 8.48043 12.1054 8.29289 12.2929C8.10536 12.4804 8 12.7348 8 13C8 13.2652 8.10536 13.5196 8.29289 13.7071C8.48043 13.8946 8.73478 14 9 14V14Z"
                                fill="black" />
                        </svg>
                        <h2>MY ACTIVITIES</h2>
                    </div>
                    <button class="toggle-button">
                        <img class="arrow-img" src="../../../image/drop arrow.png" alt="Down arrow icon">
                    </button>

                </div>
                <ul>
                    <li><a href="#">24 MAR - Activity Name</a></li>

                    <li><a href="#">14 APR - Activity Name</a></li>
                </ul>
            </div>
            <div class="small-divider"></div> -->

            <div class="related-questions">
              <!--   <div class="toggle">
                    <div class="toggle-module">
                        <svg width="18" height="20" viewBox="0 0 18 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M9 16.3636C9.178 16.3636 9.35201 16.3103 9.50001 16.2104C9.64802 16.1105 9.76337 15.9686 9.83149 15.8024C9.89961 15.6363 9.91743 15.4535 9.88271 15.2772C9.84798 15.1008 9.76226 14.9389 9.6364 14.8117C9.51053 14.6846 9.35016 14.598 9.17558 14.5629C9.001 14.5278 8.82004 14.5458 8.65558 14.6147C8.49113 14.6835 8.35057 14.8 8.25168 14.9495C8.15278 15.099 8.1 15.2747 8.1 15.4545C8.1 15.6957 8.19482 15.9269 8.3636 16.0974C8.53239 16.2679 8.7613 16.3636 9 16.3636ZM13.5 16.3636C13.678 16.3636 13.852 16.3103 14 16.2104C14.148 16.1105 14.2634 15.9686 14.3315 15.8024C14.3996 15.6363 14.4174 15.4535 14.3827 15.2772C14.348 15.1008 14.2623 14.9389 14.1364 14.8117C14.0105 14.6846 13.8502 14.598 13.6756 14.5629C13.501 14.5278 13.32 14.5458 13.1556 14.6147C12.9911 14.6835 12.8506 14.8 12.7517 14.9495C12.6528 15.099 12.6 15.2747 12.6 15.4545C12.6 15.6957 12.6948 15.9269 12.8636 16.0974C13.0324 16.2679 13.2613 16.3636 13.5 16.3636ZM13.5 12.7273C13.678 12.7273 13.852 12.674 14 12.5741C14.148 12.4742 14.2634 12.3322 14.3315 12.1661C14.3996 12 14.4174 11.8172 14.3827 11.6408C14.348 11.4645 14.2623 11.3025 14.1364 11.1754C14.0105 11.0482 13.8502 10.9616 13.6756 10.9266C13.501 10.8915 13.32 10.9095 13.1556 10.9783C12.9911 11.0471 12.8506 11.1636 12.7517 11.3131C12.6528 11.4626 12.6 11.6384 12.6 11.8182C12.6 12.0593 12.6948 12.2905 12.8636 12.461C13.0324 12.6315 13.2613 12.7273 13.5 12.7273ZM9 12.7273C9.178 12.7273 9.35201 12.674 9.50001 12.5741C9.64802 12.4742 9.76337 12.3322 9.83149 12.1661C9.89961 12 9.91743 11.8172 9.88271 11.6408C9.84798 11.4645 9.76226 11.3025 9.6364 11.1754C9.51053 11.0482 9.35016 10.9616 9.17558 10.9266C9.001 10.8915 8.82004 10.9095 8.65558 10.9783C8.49113 11.0471 8.35057 11.1636 8.25168 11.3131C8.15278 11.4626 8.1 11.6384 8.1 11.8182C8.1 12.0593 8.19482 12.2905 8.3636 12.461C8.53239 12.6315 8.7613 12.7273 9 12.7273ZM15.3 1.81818H14.4V0.909091C14.4 0.667985 14.3052 0.436754 14.1364 0.266267C13.9676 0.0957789 13.7387 0 13.5 0C13.2613 0 13.0324 0.0957789 12.8636 0.266267C12.6948 0.436754 12.6 0.667985 12.6 0.909091V1.81818H5.4V0.909091C5.4 0.667985 5.30518 0.436754 5.1364 0.266267C4.96761 0.0957789 4.73869 0 4.5 0C4.2613 0 4.03239 0.0957789 3.8636 0.266267C3.69482 0.436754 3.6 0.667985 3.6 0.909091V1.81818H2.7C1.98392 1.81818 1.29716 2.10552 0.790812 2.61698C0.284464 3.12844 0 3.82214 0 4.54545V17.2727C0 17.996 0.284464 18.6897 0.790812 19.2012C1.29716 19.7127 1.98392 20 2.7 20H15.3C16.0161 20 16.7028 19.7127 17.2092 19.2012C17.7155 18.6897 18 17.996 18 17.2727V4.54545C18 3.82214 17.7155 3.12844 17.2092 2.61698C16.7028 2.10552 16.0161 1.81818 15.3 1.81818ZM16.2 17.2727C16.2 17.5138 16.1052 17.7451 15.9364 17.9156C15.7676 18.086 15.5387 18.1818 15.3 18.1818H2.7C2.46131 18.1818 2.23239 18.086 2.0636 17.9156C1.89482 17.7451 1.8 17.5138 1.8 17.2727V9.09091H16.2V17.2727ZM16.2 7.27273H1.8V4.54545C1.8 4.30435 1.89482 4.07312 2.0636 3.90263C2.23239 3.73214 2.46131 3.63636 2.7 3.63636H3.6V4.54545C3.6 4.78656 3.69482 5.01779 3.8636 5.18828C4.03239 5.35877 4.2613 5.45455 4.5 5.45455C4.73869 5.45455 4.96761 5.35877 5.1364 5.18828C5.30518 5.01779 5.4 4.78656 5.4 4.54545V3.63636H12.6V4.54545C12.6 4.78656 12.6948 5.01779 12.8636 5.18828C13.0324 5.35877 13.2613 5.45455 13.5 5.45455C13.7387 5.45455 13.9676 5.35877 14.1364 5.18828C14.3052 5.01779 14.4 4.78656 14.4 4.54545V3.63636H15.3C15.5387 3.63636 15.7676 3.73214 15.9364 3.90263C16.1052 4.07312 16.2 4.30435 16.2 4.54545V7.27273ZM4.5 12.7273C4.678 12.7273 4.85201 12.674 5.00001 12.5741C5.14802 12.4742 5.26337 12.3322 5.33149 12.1661C5.39961 12 5.41743 11.8172 5.38271 11.6408C5.34798 11.4645 5.26226 11.3025 5.1364 11.1754C5.01053 11.0482 4.85016 10.9616 4.67558 10.9266C4.501 10.8915 4.32004 10.9095 4.15558 10.9783C3.99113 11.0471 3.85057 11.1636 3.75168 11.3131C3.65278 11.4626 3.6 11.6384 3.6 11.8182C3.6 12.0593 3.69482 12.2905 3.8636 12.461C4.03239 12.6315 4.2613 12.7273 4.5 12.7273ZM4.5 16.3636C4.678 16.3636 4.85201 16.3103 5.00001 16.2104C5.14802 16.1105 5.26337 15.9686 5.33149 15.8024C5.39961 15.6363 5.41743 15.4535 5.38271 15.2772C5.34798 15.1008 5.26226 14.9389 5.1364 14.8117C5.01053 14.6846 4.85016 14.598 4.67558 14.5629C4.501 14.5278 4.32004 14.5458 4.15558 14.6147C3.99113 14.6835 3.85057 14.8 3.75168 14.9495C3.65278 15.099 3.6 15.2747 3.6 15.4545C3.6 15.6957 3.69482 15.9269 3.8636 16.0974C4.03239 16.2679 4.2613 16.3636 4.5 16.3636Z"
                                fill="black" />
                        </svg>
                        <h2>UPCOMING</h2>
                    </div>
                    <button class="toggle-button">
                        <img class="arrow-img" src="../../../image/drop arrow.png" alt="Down arrow icon">
                    </button>
                </div> -->
                <ul>
                    <!-- <svg class="toggle-side-arrow" width="16" height="15" viewBox="0 0 16 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M0.5 0.5V14.5H15.5" stroke="#E6E6E6" />
                    </svg> -->
                    <li><a href="#">24 MAR - Activity Name</a></li>

                    <!-- <li><svg width="10" height="16" viewBox="0 0 10 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M7.78459 5.18594L7.84494 11.3576C7.80681 12.1206 7.47827 12.8343 6.92654 13.3528C6.3748 13.8714 5.64157 14.1555 4.87681 14.1471C4.11206 14.1387 3.37358 13.8384 2.81243 13.3077C2.25128 12.7769 1.90988 12.0559 1.85804 11.2919L1.78642 3.30923C1.79419 2.8447 1.98013 2.40446 2.30584 2.07939C2.63156 1.75433 3.07218 1.56927 3.53671 1.56244C4.00419 1.57068 4.45328 1.76267 4.78679 2.09684C5.1203 2.43102 5.31139 2.8805 5.3187 3.34799L5.37543 10.228C5.37869 10.2988 5.36798 10.3693 5.34392 10.4354C5.31986 10.5015 5.28291 10.5619 5.2352 10.6133C5.18748 10.6647 5.12993 10.7059 5.06582 10.7347C5.00172 10.7635 4.93232 10.7793 4.86158 10.7811C4.79084 10.783 4.72016 10.7708 4.65356 10.7455C4.58697 10.7201 4.52576 10.6819 4.47344 10.6332C4.42112 10.5844 4.37871 10.526 4.34864 10.4613C4.31856 10.3966 4.3014 10.3269 4.29815 10.2561L4.25726 5.14225C4.25557 4.95435 4.17931 4.77333 4.04526 4.63901C3.91121 4.50469 3.73034 4.42807 3.54245 4.42601C3.35456 4.42395 3.17503 4.49661 3.04336 4.62802C2.91169 4.75942 2.83867 4.9388 2.84036 5.1267L2.89131 10.2506C2.89261 10.5058 2.9444 10.7591 3.0437 10.9961C3.14299 11.2331 3.28783 11.449 3.46987 11.6314C3.6519 11.8138 3.86752 11.9591 4.10431 12.0589C4.34109 12.1586 4.59435 12.2109 4.84948 12.2127C5.36018 12.2059 5.84477 12.0028 6.20283 11.6455C6.5609 11.2881 6.76499 10.8039 6.77282 10.2932L6.70611 3.4131C6.66971 2.5906 6.31571 1.80797 5.71869 1.2301C5.12167 0.652221 4.32825 0.324218 3.50557 0.31519C2.68289 0.306162 1.89519 0.616815 1.30843 1.1817C0.721661 1.74658 0.381638 2.5216 0.359993 3.34346L0.431609 11.3262C0.499677 12.4612 1.0026 13.5348 1.83561 14.3235C2.66861 15.1122 3.76744 15.5551 4.90316 15.5598C6.03888 15.5646 7.12389 15.1308 7.93213 14.349C8.74037 13.5672 9.20951 12.4975 9.2418 11.363L9.19142 5.1914C9.19058 5.09837 9.17143 5.00604 9.13506 4.9197C9.09868 4.83335 9.0458 4.75468 8.97942 4.68817C8.91305 4.62166 8.83448 4.56862 8.74821 4.53207C8.66193 4.49552 8.56965 4.47619 8.47661 4.47517C8.38358 4.47415 8.29162 4.49146 8.20598 4.52612C8.12035 4.56078 8.04272 4.61211 7.97752 4.67717C7.91233 4.74224 7.86084 4.81977 7.82601 4.90533C7.79118 4.9909 7.77368 5.08282 7.77452 5.17586L7.78459 5.18594Z"
                                fill="#757575" />
                        </svg><a href="#">Question 2</a></li>
                    <li><svg width="10" height="16" viewBox="0 0 10 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M7.78459 5.18594L7.84494 11.3576C7.80681 12.1206 7.47827 12.8343 6.92654 13.3528C6.3748 13.8714 5.64157 14.1555 4.87681 14.1471C4.11206 14.1387 3.37358 13.8384 2.81243 13.3077C2.25128 12.7769 1.90988 12.0559 1.85804 11.2919L1.78642 3.30923C1.79419 2.8447 1.98013 2.40446 2.30584 2.07939C2.63156 1.75433 3.07218 1.56927 3.53671 1.56244C4.00419 1.57068 4.45328 1.76267 4.78679 2.09684C5.1203 2.43102 5.31139 2.8805 5.3187 3.34799L5.37543 10.228C5.37869 10.2988 5.36798 10.3693 5.34392 10.4354C5.31986 10.5015 5.28291 10.5619 5.2352 10.6133C5.18748 10.6647 5.12993 10.7059 5.06582 10.7347C5.00172 10.7635 4.93232 10.7793 4.86158 10.7811C4.79084 10.783 4.72016 10.7708 4.65356 10.7455C4.58697 10.7201 4.52576 10.6819 4.47344 10.6332C4.42112 10.5844 4.37871 10.526 4.34864 10.4613C4.31856 10.3966 4.3014 10.3269 4.29815 10.2561L4.25726 5.14225C4.25557 4.95435 4.17931 4.77333 4.04526 4.63901C3.91121 4.50469 3.73034 4.42807 3.54245 4.42601C3.35456 4.42395 3.17503 4.49661 3.04336 4.62802C2.91169 4.75942 2.83867 4.9388 2.84036 5.1267L2.89131 10.2506C2.89261 10.5058 2.9444 10.7591 3.0437 10.9961C3.14299 11.2331 3.28783 11.449 3.46987 11.6314C3.6519 11.8138 3.86752 11.9591 4.10431 12.0589C4.34109 12.1586 4.59435 12.2109 4.84948 12.2127C5.36018 12.2059 5.84477 12.0028 6.20283 11.6455C6.5609 11.2881 6.76499 10.8039 6.77282 10.2932L6.70611 3.4131C6.66971 2.5906 6.31571 1.80797 5.71869 1.2301C5.12167 0.652221 4.32825 0.324218 3.50557 0.31519C2.68289 0.306162 1.89519 0.616815 1.30843 1.1817C0.721661 1.74658 0.381638 2.5216 0.359993 3.34346L0.431609 11.3262C0.499677 12.4612 1.0026 13.5348 1.83561 14.3235C2.66861 15.1122 3.76744 15.5551 4.90316 15.5598C6.03888 15.5646 7.12389 15.1308 7.93213 14.349C8.74037 13.5672 9.20951 12.4975 9.2418 11.363L9.19142 5.1914C9.19058 5.09837 9.17143 5.00604 9.13506 4.9197C9.09868 4.83335 9.0458 4.75468 8.97942 4.68817C8.91305 4.62166 8.83448 4.56862 8.74821 4.53207C8.66193 4.49552 8.56965 4.47619 8.47661 4.47517C8.38358 4.47415 8.29162 4.49146 8.20598 4.52612C8.12035 4.56078 8.04272 4.61211 7.97752 4.67717C7.91233 4.74224 7.86084 4.81977 7.82601 4.90533C7.79118 4.9909 7.77368 5.08282 7.77452 5.17586L7.78459 5.18594Z"
                                fill="#757575" />
                        </svg><a href="#">Question 3</a>
                    </li> -->
                </ul>
            </div>
            <!-- <div class="small-divider"></div> -->


            <div class="related-questions">
                <!-- <div class="toggle">
                    <div class="toggle-module">
                        <svg width="20" height="18" viewBox="0 0 20 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M19 7.5H18V6.5C18 6.23478 17.8946 5.98043 17.7071 5.79289C17.5196 5.60536 17.2652 5.5 17 5.5C16.7348 5.5 16.4804 5.60536 16.2929 5.79289C16.1054 5.98043 16 6.23478 16 6.5V7.5H15C14.7348 7.5 14.4804 7.60536 14.2929 7.79289C14.1054 7.98043 14 8.23478 14 8.5C14 8.76522 14.1054 9.01957 14.2929 9.20711C14.4804 9.39464 14.7348 9.5 15 9.5H16V10.5C16 10.7652 16.1054 11.0196 16.2929 11.2071C16.4804 11.3946 16.7348 11.5 17 11.5C17.2652 11.5 17.5196 11.3946 17.7071 11.2071C17.8946 11.0196 18 10.7652 18 10.5V9.5H19C19.2652 9.5 19.5196 9.39464 19.7071 9.20711C19.8946 9.01957 20 8.76522 20 8.5C20 8.23478 19.8946 7.98043 19.7071 7.79289C19.5196 7.60536 19.2652 7.5 19 7.5ZM11.3 9.22C11.8336 8.75813 12.2616 8.18688 12.5549 7.54502C12.8482 6.90316 13 6.20571 13 5.5C13 4.17392 12.4732 2.90215 11.5355 1.96447C10.5979 1.02678 9.32608 0.5 8 0.5C6.67392 0.5 5.40215 1.02678 4.46447 1.96447C3.52678 2.90215 3 4.17392 3 5.5C2.99999 6.20571 3.1518 6.90316 3.44513 7.54502C3.73845 8.18688 4.16642 8.75813 4.7 9.22C3.30014 9.85388 2.11247 10.8775 1.27898 12.1685C0.445495 13.4596 0.00147185 14.9633 0 16.5C0 16.7652 0.105357 17.0196 0.292893 17.2071C0.48043 17.3946 0.734784 17.5 1 17.5C1.26522 17.5 1.51957 17.3946 1.70711 17.2071C1.89464 17.0196 2 16.7652 2 16.5C2 14.9087 2.63214 13.3826 3.75736 12.2574C4.88258 11.1321 6.4087 10.5 8 10.5C9.5913 10.5 11.1174 11.1321 12.2426 12.2574C13.3679 13.3826 14 14.9087 14 16.5C14 16.7652 14.1054 17.0196 14.2929 17.2071C14.4804 17.3946 14.7348 17.5 15 17.5C15.2652 17.5 15.5196 17.3946 15.7071 17.2071C15.8946 17.0196 16 16.7652 16 16.5C15.9985 14.9633 15.5545 13.4596 14.721 12.1685C13.8875 10.8775 12.6999 9.85388 11.3 9.22V9.22ZM8 8.5C7.40666 8.5 6.82664 8.32405 6.33329 7.99441C5.83994 7.66476 5.45542 7.19623 5.22836 6.64805C5.0013 6.09987 4.94189 5.49667 5.05764 4.91473C5.1734 4.33279 5.45912 3.79824 5.87868 3.37868C6.29824 2.95912 6.83279 2.6734 7.41473 2.55764C7.99667 2.44189 8.59987 2.5013 9.14805 2.72836C9.69623 2.95542 10.1648 3.33994 10.4944 3.83329C10.8241 4.32664 11 4.90666 11 5.5C11 6.29565 10.6839 7.05871 10.1213 7.62132C9.55871 8.18393 8.79565 8.5 8 8.5Z"
                                fill="black" />
                        </svg>

                        <h2>NEW MEMBERS</h2>
                    </div>
                    <button class="toggle-button">
                        <img class="arrow-img" src="../../../image/drop arrow.png" alt="Down arrow icon">
                    </button>
                </div> -->
                <ul>
                    <!-- <svg class="toggle-side-arrow" width="16" height="15" viewBox="0 0 16 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M0.5 0.5V14.5H15.5" stroke="#E6E6E6" />
                    </svg> -->
                    <li style="margin-left: 0px; justify-content: flex-start; background: #ffff;">
                        <a href="#" style="background: #ffff;">Tara Bourne <span color="#E0E0E0">(1h ago)</span></a></li>
                    <li style="margin-left: 0px; justify-content: flex-start; background: #ffff;">
                        <a href="#" style="background: #ffff;">Jason May <span color="#E0E0E0">(3d ago)</span></a></li>
                    <li style="margin-left: 0px; justify-content: flex-start; background: #ffff;">
                        <a href="#" style="background: #ffff;">Mike Wong <span color="#E0E0E0">(5h ago)</span></a></li>
                </ul>
            </div>

            <!-- <div class="small-divider"></div> -->

            <div class="related-questions">
                <!-- <div class="toggle">
                    <div class="toggle-module">
                        <svg width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M6 14C6.39782 14 6.77936 13.842 7.06066 13.5607C7.34196 13.2794 7.5 12.8978 7.5 12.5C7.50488 12.4501 7.50488 12.3999 7.5 12.35L10.29 9.56H10.52H10.75L12.36 11.17C12.36 11.17 12.36 11.22 12.36 11.25C12.36 11.6478 12.518 12.0294 12.7993 12.3107C13.0806 12.592 13.4622 12.75 13.86 12.75C14.2578 12.75 14.6394 12.592 14.9207 12.3107C15.202 12.0294 15.36 11.6478 15.36 11.25V11.17L19 7.5C19.2967 7.5 19.5867 7.41203 19.8334 7.2472C20.08 7.08238 20.2723 6.84811 20.3858 6.57403C20.4993 6.29994 20.5291 5.99834 20.4712 5.70736C20.4133 5.41639 20.2704 5.14912 20.0607 4.93934C19.8509 4.72956 19.5836 4.5867 19.2926 4.52882C19.0017 4.47094 18.7001 4.50065 18.426 4.61418C18.1519 4.72771 17.9176 4.91997 17.7528 5.16664C17.588 5.41332 17.5 5.70333 17.5 6C17.4951 6.04988 17.4951 6.10012 17.5 6.15L13.89 9.76H13.73L12 8C12 7.60218 11.842 7.22064 11.5607 6.93934C11.2794 6.65804 10.8978 6.5 10.5 6.5C10.1022 6.5 9.72064 6.65804 9.43934 6.93934C9.15804 7.22064 9 7.60218 9 8L6 11C5.60218 11 5.22064 11.158 4.93934 11.4393C4.65804 11.7206 4.5 12.1022 4.5 12.5C4.5 12.8978 4.65804 13.2794 4.93934 13.5607C5.22064 13.842 5.60218 14 6 14V14ZM19.5 18H2.5V1C2.5 0.734784 2.39464 0.48043 2.20711 0.292893C2.01957 0.105357 1.76522 0 1.5 0C1.23478 0 0.98043 0.105357 0.792893 0.292893C0.605357 0.48043 0.5 0.734784 0.5 1V19C0.5 19.2652 0.605357 19.5196 0.792893 19.7071C0.98043 19.8946 1.23478 20 1.5 20H19.5C19.7652 20 20.0196 19.8946 20.2071 19.7071C20.3946 19.5196 20.5 19.2652 20.5 19C20.5 18.7348 20.3946 18.4804 20.2071 18.2929C20.0196 18.1054 19.7652 18 19.5 18Z"
                                fill="black" />
                        </svg>

                        <h2>TRENDING DISCUSSIONS</h2>
                    </div>
                    <button class="toggle-button">
                        <img class="arrow-img" src="../../../image/drop arrow.png" alt="Down arrow icon">
                    </button>
                </div> -->
                <ul>
                    <!-- <svg class="toggle-side-arrow" width="16" height="15" viewBox="0 0 16 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M0.5 0.5V14.5H15.5" stroke="#E6E6E6" />
                    </svg> -->
                    <li style="margin-left: 0px; justify-content: flex-start; background: #ffff;"><a href="#"> . #WorkLife</a></li>
                    <li style="margin-left: 0px; justify-content: flex-start; background: #ffff;"><a href="#"> . #Insider</a></li>
                    <li style="margin-left: 0px; justify-content: flex-start; background: #ffff;"><a href="#"> . #Summit 2023</a></li>

                    <!-- <li><svg width="10" height="16" viewBox="0 0 10 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M7.78459 5.18594L7.84494 11.3576C7.80681 12.1206 7.47827 12.8343 6.92654 13.3528C6.3748 13.8714 5.64157 14.1555 4.87681 14.1471C4.11206 14.1387 3.37358 13.8384 2.81243 13.3077C2.25128 12.7769 1.90988 12.0559 1.85804 11.2919L1.78642 3.30923C1.79419 2.8447 1.98013 2.40446 2.30584 2.07939C2.63156 1.75433 3.07218 1.56927 3.53671 1.56244C4.00419 1.57068 4.45328 1.76267 4.78679 2.09684C5.1203 2.43102 5.31139 2.8805 5.3187 3.34799L5.37543 10.228C5.37869 10.2988 5.36798 10.3693 5.34392 10.4354C5.31986 10.5015 5.28291 10.5619 5.2352 10.6133C5.18748 10.6647 5.12993 10.7059 5.06582 10.7347C5.00172 10.7635 4.93232 10.7793 4.86158 10.7811C4.79084 10.783 4.72016 10.7708 4.65356 10.7455C4.58697 10.7201 4.52576 10.6819 4.47344 10.6332C4.42112 10.5844 4.37871 10.526 4.34864 10.4613C4.31856 10.3966 4.3014 10.3269 4.29815 10.2561L4.25726 5.14225C4.25557 4.95435 4.17931 4.77333 4.04526 4.63901C3.91121 4.50469 3.73034 4.42807 3.54245 4.42601C3.35456 4.42395 3.17503 4.49661 3.04336 4.62802C2.91169 4.75942 2.83867 4.9388 2.84036 5.1267L2.89131 10.2506C2.89261 10.5058 2.9444 10.7591 3.0437 10.9961C3.14299 11.2331 3.28783 11.449 3.46987 11.6314C3.6519 11.8138 3.86752 11.9591 4.10431 12.0589C4.34109 12.1586 4.59435 12.2109 4.84948 12.2127C5.36018 12.2059 5.84477 12.0028 6.20283 11.6455C6.5609 11.2881 6.76499 10.8039 6.77282 10.2932L6.70611 3.4131C6.66971 2.5906 6.31571 1.80797 5.71869 1.2301C5.12167 0.652221 4.32825 0.324218 3.50557 0.31519C2.68289 0.306162 1.89519 0.616815 1.30843 1.1817C0.721661 1.74658 0.381638 2.5216 0.359993 3.34346L0.431609 11.3262C0.499677 12.4612 1.0026 13.5348 1.83561 14.3235C2.66861 15.1122 3.76744 15.5551 4.90316 15.5598C6.03888 15.5646 7.12389 15.1308 7.93213 14.349C8.74037 13.5672 9.20951 12.4975 9.2418 11.363L9.19142 5.1914C9.19058 5.09837 9.17143 5.00604 9.13506 4.9197C9.09868 4.83335 9.0458 4.75468 8.97942 4.68817C8.91305 4.62166 8.83448 4.56862 8.74821 4.53207C8.66193 4.49552 8.56965 4.47619 8.47661 4.47517C8.38358 4.47415 8.29162 4.49146 8.20598 4.52612C8.12035 4.56078 8.04272 4.61211 7.97752 4.67717C7.91233 4.74224 7.86084 4.81977 7.82601 4.90533C7.79118 4.9909 7.77368 5.08282 7.77452 5.17586L7.78459 5.18594Z"
                                fill="#757575" />
                        </svg><a href="#">Question 2</a></li>
                    <li><svg width="10" height="16" viewBox="0 0 10 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M7.78459 5.18594L7.84494 11.3576C7.80681 12.1206 7.47827 12.8343 6.92654 13.3528C6.3748 13.8714 5.64157 14.1555 4.87681 14.1471C4.11206 14.1387 3.37358 13.8384 2.81243 13.3077C2.25128 12.7769 1.90988 12.0559 1.85804 11.2919L1.78642 3.30923C1.79419 2.8447 1.98013 2.40446 2.30584 2.07939C2.63156 1.75433 3.07218 1.56927 3.53671 1.56244C4.00419 1.57068 4.45328 1.76267 4.78679 2.09684C5.1203 2.43102 5.31139 2.8805 5.3187 3.34799L5.37543 10.228C5.37869 10.2988 5.36798 10.3693 5.34392 10.4354C5.31986 10.5015 5.28291 10.5619 5.2352 10.6133C5.18748 10.6647 5.12993 10.7059 5.06582 10.7347C5.00172 10.7635 4.93232 10.7793 4.86158 10.7811C4.79084 10.783 4.72016 10.7708 4.65356 10.7455C4.58697 10.7201 4.52576 10.6819 4.47344 10.6332C4.42112 10.5844 4.37871 10.526 4.34864 10.4613C4.31856 10.3966 4.3014 10.3269 4.29815 10.2561L4.25726 5.14225C4.25557 4.95435 4.17931 4.77333 4.04526 4.63901C3.91121 4.50469 3.73034 4.42807 3.54245 4.42601C3.35456 4.42395 3.17503 4.49661 3.04336 4.62802C2.91169 4.75942 2.83867 4.9388 2.84036 5.1267L2.89131 10.2506C2.89261 10.5058 2.9444 10.7591 3.0437 10.9961C3.14299 11.2331 3.28783 11.449 3.46987 11.6314C3.6519 11.8138 3.86752 11.9591 4.10431 12.0589C4.34109 12.1586 4.59435 12.2109 4.84948 12.2127C5.36018 12.2059 5.84477 12.0028 6.20283 11.6455C6.5609 11.2881 6.76499 10.8039 6.77282 10.2932L6.70611 3.4131C6.66971 2.5906 6.31571 1.80797 5.71869 1.2301C5.12167 0.652221 4.32825 0.324218 3.50557 0.31519C2.68289 0.306162 1.89519 0.616815 1.30843 1.1817C0.721661 1.74658 0.381638 2.5216 0.359993 3.34346L0.431609 11.3262C0.499677 12.4612 1.0026 13.5348 1.83561 14.3235C2.66861 15.1122 3.76744 15.5551 4.90316 15.5598C6.03888 15.5646 7.12389 15.1308 7.93213 14.349C8.74037 13.5672 9.20951 12.4975 9.2418 11.363L9.19142 5.1914C9.19058 5.09837 9.17143 5.00604 9.13506 4.9197C9.09868 4.83335 9.0458 4.75468 8.97942 4.68817C8.91305 4.62166 8.83448 4.56862 8.74821 4.53207C8.66193 4.49552 8.56965 4.47619 8.47661 4.47517C8.38358 4.47415 8.29162 4.49146 8.20598 4.52612C8.12035 4.56078 8.04272 4.61211 7.97752 4.67717C7.91233 4.74224 7.86084 4.81977 7.82601 4.90533C7.79118 4.9909 7.77368 5.08282 7.77452 5.17586L7.78459 5.18594Z"
                                fill="#757575" />
                        </svg><a href="#">Question 3</a>
                    </li> -->
                </ul>
            </div>

            <!-- <div class="small-divider"></div> -->

            <!-- <div class="related-questions">
                <div class="toggle">
                    <div class="toggle-module">
                        <svg width="22" height="21" viewBox="0 0 22 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M10.9999 6.0058C10.2088 6.0058 9.43546 6.24039 8.77766 6.67992C8.11986 7.11945 7.60717 7.74416 7.30442 8.47506C7.00167 9.20597 6.92246 10.0102 7.0768 10.7862C7.23114 11.5621 7.6121 12.2748 8.17151 12.8342C8.73092 13.3936 9.44365 13.7746 10.2196 13.9289C10.9955 14.0833 11.7998 14.0041 12.5307 13.7013C13.2616 13.3986 13.8863 12.8859 14.3258 12.2281C14.7653 11.5703 14.9999 10.7969 14.9999 10.0058C14.9999 8.94493 14.5785 7.92752 13.8284 7.17737C13.0782 6.42723 12.0608 6.0058 10.9999 6.0058V6.0058ZM10.9999 12.0058C10.6044 12.0058 10.2177 11.8885 9.8888 11.6687C9.5599 11.449 9.30355 11.1366 9.15218 10.7712C9.0008 10.4057 8.9612 10.0036 9.03837 9.61562C9.11554 9.22766 9.30602 8.87129 9.58573 8.59159C9.86543 8.31188 10.2218 8.1214 10.6098 8.04423C10.9977 7.96706 11.3999 8.00666 11.7653 8.15804C12.1308 8.30941 12.4431 8.56576 12.6629 8.89466C12.8826 9.22356 12.9999 9.61024 12.9999 10.0058C12.9999 10.5362 12.7892 11.0449 12.4142 11.42C12.0391 11.7951 11.5304 12.0058 10.9999 12.0058ZM20.7099 9.2958L18.3599 7.0058V3.6458C18.3599 3.38058 18.2546 3.12623 18.067 2.93869C17.8795 2.75116 17.6252 2.6458 17.3599 2.6458H14.0499L11.7099 0.295798C11.617 0.20207 11.5064 0.127676 11.3845 0.0769069C11.2627 0.0261382 11.132 0 10.9999 0C10.8679 0 10.7372 0.0261382 10.6154 0.0769069C10.4935 0.127676 10.3829 0.20207 10.2899 0.295798L7.99994 2.6458H4.63994C4.37472 2.6458 4.12037 2.75116 3.93283 2.93869C3.7453 3.12623 3.63994 3.38058 3.63994 3.6458V7.0058L1.28994 9.2958C1.19621 9.38876 1.12182 9.49936 1.07105 9.62122C1.02028 9.74308 0.994141 9.87379 0.994141 10.0058C0.994141 10.1378 1.02028 10.2685 1.07105 10.3904C1.12182 10.5122 1.19621 10.6228 1.28994 10.7158L3.63994 13.0558V16.3658C3.63994 16.631 3.7453 16.8854 3.93283 17.0729C4.12037 17.2604 4.37472 17.3658 4.63994 17.3658H7.99994L10.3399 19.7158C10.4329 19.8095 10.5435 19.8839 10.6654 19.9347C10.7872 19.9855 10.9179 20.0116 11.0499 20.0116C11.182 20.0116 11.3127 19.9855 11.4345 19.9347C11.5564 19.8839 11.667 19.8095 11.7599 19.7158L14.0999 17.3658H17.4099C17.6752 17.3658 17.9295 17.2604 18.117 17.0729C18.3046 16.8854 18.4099 16.631 18.4099 16.3658V13.0558L20.7599 10.7158C20.8505 10.6196 20.921 10.5064 20.9676 10.3827C21.0141 10.2591 21.0356 10.1274 21.031 9.99537C21.0263 9.86334 20.9956 9.73353 20.9405 9.61346C20.8854 9.49338 20.807 9.38542 20.7099 9.2958ZM16.6599 11.9358C16.5655 12.0284 16.4903 12.1389 16.4388 12.2607C16.3873 12.3826 16.3605 12.5135 16.3599 12.6458V15.3658H13.6399C13.5076 15.3663 13.3767 15.3931 13.2549 15.4446C13.133 15.4961 13.0226 15.5713 12.9299 15.6658L10.9999 17.5958L9.06994 15.6658C8.97732 15.5713 8.86688 15.4961 8.745 15.4446C8.62313 15.3931 8.49225 15.3663 8.35994 15.3658H5.63994V12.6458C5.63939 12.5135 5.61259 12.3826 5.56109 12.2607C5.5096 12.1389 5.43443 12.0284 5.33994 11.9358L3.40994 10.0058L5.33994 8.0758C5.43443 7.98318 5.5096 7.87274 5.56109 7.75086C5.61259 7.62899 5.63939 7.49811 5.63994 7.3658V4.6458H8.35994C8.49225 4.64525 8.62313 4.61845 8.745 4.56695C8.86688 4.51546 8.97732 4.44029 9.06994 4.3458L10.9999 2.4158L12.9299 4.3458C13.0226 4.44029 13.133 4.51546 13.2549 4.56695C13.3767 4.61845 13.5076 4.64525 13.6399 4.6458H16.3599V7.3658C16.3605 7.49811 16.3873 7.62899 16.4388 7.75086C16.4903 7.87274 16.5655 7.98318 16.6599 8.0758L18.5899 10.0058L16.6599 11.9358Z"
                                fill="black" />
                        </svg>


                        <h2>SETTINGS</h2>
                    </div>
                    <button class="toggle-button">
                        <img class="arrow-img" src="../../../image/drop arrow.png" alt="Down arrow icon">
                    </button>
                </div>
                <ul>
                    <li style="margin-left: 0px; justify-content: flex-start; background: #ffff;"><a href="#" style="font-weight: 500; color: #000000;">Business Consultation<br><span style="font-size: 10px; font-weight: 500; color: #757575; margin-right: 45px;">by James Mason</span></a></li>
                    <li style="margin-left: 0px; justify-content: flex-start; background: #ffff;"><a href="#" style="font-weight: 500; color: #000000;">Marketing Workshop<br><span style="font-size: 10px; font-weight: 500; color: #757575; margin-right: 40px;">by James Mason</span></a></li>
                </ul>
            </div> -->


        </div>


    </div>
</template>



<script>
import { mapGetters, mapActions } from 'vuex'
import ChatReceiver from '../components/Chat/ChatReceiver.vue';
import ChatSender from '../components/Chat/ChatSender.vue';
import PostMessage from '../components/Chat/PostMessage.vue';

export default {
    name: 'TeacherChatDiscussion',
    components: {
        ChatReceiver,
        ChatSender,
        PostMessage
    },
    data() {
        return {
            activeItem: 'Community',
            descriptionDetails: null,
            thumbnail: null,
            reply: {
                'type': 'REPLY',
                'content': null,
                'parent_comment': null
            },
            comment: {
                'type': 'COMMENT',
                'content': null
            },
            isReply: false,
            trendingDiscussionTitle:[]

        };
    },
    computed: {
        ...mapGetters('chatDiscussion', ['chatMessages','discussionId','discussionPermission'])
    },
    async created() { 

        if (this.discussionPermission === 'allowed') {
            // load the description of the post
            const res = await this.loadDicussionDetails(this.discussionId)
            if (res.status === 200) {
                this.descriptionDetails = res.data.top_comment
                this.thumbnail = res.data.thumbnail
            }


            //loading previous discussions on this post
            await this.loadPreviousChats(this.discussionId)

            // join web socket
            await this.initiateChat(this.discussionId)
        }
        
        
    },

    mounted() {
        // Get all the toggle buttons and related questions elements
        const toggleButtons = document.querySelectorAll('.related-questions');
        const relatedQuestions = document.querySelectorAll('.related-questions ul');
        // const side_arrow = document.querySelectorAll('.toggle-side-arrow');/

        // Loop through each toggle button
        for (let i = 0; i < toggleButtons.length; i++) {
            // Toggle the related questions on click
            toggleButtons[i].addEventListener('click', () => {
                // Toggle the class for the active button state
                toggleButtons[i].classList.toggle('active');

                // Toggle the related questions visibility
                relatedQuestions[i].classList.toggle('active');
                // toggle-side-arrow[i].classList.toggle('active');

            });
        }

    },
    beforeDestroy() { 
        this.closeSocket()
    },
    methods: {

        ...mapActions('chatDiscussion',["loadDicussionDetails", "sendMessage", "loadPreviousChats",'initiateChat','closeSocket']),
        show(val) {
            this.activeItem = val;
        },
        
        /**
         * This function handles the data emitted and will post message on socket
         * 
         */
        sendDiscussion(message) { 
            if (this.isReply) {
                this.reply.content = message
                // post reply of a comment to the socket
                this.sendMessage(this.reply)
                this.isReply = false
            }
            else { 
                this.comment.content = message
                // post comment to the socket
                this.sendMessage(this.comment)
            }
        },

        /**
         * This function handles the data emitted and configures if it is a reply or not 
         */        
        replyId(replyId) {
            if (!Object.is(replyId, null)) {
                // if reply id is not null than sets the reply payload and isReply variable
                this.isReply = true
                this.reply.parent_comment = replyId

            } else { 
                this.isReply = false
            }
        },
        uploadImage(payload){
            console.log(payload)
            this.sendMessage(payload)
        }
    },
}

</script>


<style scoped>
.RecieverContent-about-ShareLinks>span:nth-of-type(3) {
    display: flex;
    gap: 3px;
}

.SenderContent-about-ShareLinks>span:nth-of-type(3) {
    display: flex;
    gap: 3px;
}

/* Style for the arrow image */
.arrow-img {
    width: 12px;
    height: 12px;
    transition: transform 0.3s ease-in-out;
}

.toggle {
    margin: 0 2rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: relative;
}



/* Rotate the arrow image on click */
.toggle-button.active .arrow-img {
    transform: rotate(180deg);
}

.related-questions {
    padding: 0.6rem 0;
}

.related-questions:hover {
    background: #F5F5F5;
}

/* Hide the related questions by default */
.related-questions ul {
    display: none;
}

.related-questions ul li {
    list-style-type: none;
    display: flex;
    flex-direction: row;
    justify-content: center;
    gap: 2rem;
    background: #f6f6f6de;
    padding: 0.5rem 0.2rem;
    margin-right: 1rem;
    border-radius: 5px;
    /* margin-left: 3rem; */

}

/* Show the related questions when the button is clicked */
.related-questions ul.active {
    display: block;
    margin-top: 1rem;
    position: relative;
}

.related-questions ul li {
    background: #F6F6F6;
    list-style-type: none;
    text-decoration: none;
    justify-content: center;
    align-items: center;
    gap: 1rem;
    margin-right: 1rem;
    border-radius: 5px;
    margin-bottom: 0.5rem
}

ul.active a {
    text-decoration: none;
    color: #757575;
    font-size: 12px;
    font-weight: 500;
    line-height: 19.44px;
    font-family: 'poppins';
    padding-left: 10px;
}

.related-questions:nth-of-type(4) ul{
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    align-items: flex-start;
    border: 1px solid;
}

.related-questions li {
  background-color: #FFF;
  transition: background-color 0.3s ease;
}

.related-questions li:hover {
  background-color: #F6F6F6;
}

.related-questions li.active {
  background-color: #FFF;
}

.toggle-module {
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    gap: 1rem;
}
.small-divider {
    border-bottom: 1px solid #E6E6E6;
    margin: 0 10px;
}

li.active {
    text-decoration: underline;
    color: #434343;
	text-decoration: underline;
	text-decoration-thickness: 3px;
	text-underline-offset: 6px;
	cursor: pointer;
}

li:hover{
    cursor: pointer;
}

    .WelcomeTab-AdminModule{
        display: flex;
        flex-direction: column;
    }
    .WelcomeTab-AdminModule p{
        align-self: flex-start;
        padding: 0 2rem;
        font-size: 16px;
        font-weight: 500;
        line-height: 24px;
        color: #2D9CDB;
        margin-bottom: 30px;
        margin-top: -15px;
    }
    .AdminModule-Person{
        display: flex;
        flex-direction: row;
        justify-content: space-between;
        align-items: center;
        padding: 0 1rem;
    }
    .AdminModule-Person span{
        font-size: 12px;
        line-height: 18px;
        font-weight: 400;
        color:#4F4F4F;
    }
    .AdminModule-Person span:hover{
        cursor:default;
       color:#4F4F4F;
    }
</style>






